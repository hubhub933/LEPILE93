<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    -- ----------------------------------------------------------
-- Script MYSQL pour mcd 
-- ----------------------------------------------------------


-- ----------------------------
-- Table: Grades
-- ----------------------------
CREATE TABLE Grades (
  code_grade VARCHAR(50) NOT NULL,
  intitule_grade VARCHAR(50) NOT NULL,
  CONSTRAINT Grades_PK PRIMARY KEY (code_grade)
)ENGINE=InnoDB;


-- ----------------------------
-- Table: Batailles
-- ----------------------------
CREATE TABLE Batailles (
  code_bataille VARCHAR(50) NOT NULL,
  lieu VARCHAR(50) NOT NULL,
  date_debut DATE NOT NULL,
  date_fin DATE NOT NULL,
  CONSTRAINT Batailles_PK PRIMARY KEY (code_bataille)
)ENGINE=InnoDB;


-- ----------------------------
-- Table: Soldats
-- ----------------------------
CREATE TABLE Soldats (
  code_soldat VARCHAR(50) NOT NULL,
  nom_soldat VARCHAR(50) NOT NULL,
  prenom_soldat VARCHAR(50) NOT NULL,
  date_naissance DATE NOT NULL,
  date_deces DATE NOT NULL,
  CONSTRAINT Soldats_PK PRIMARY KEY (code_soldat)
)ENGINE=InnoDB;


-- ----------------------------
-- Table: Blessures
-- ----------------------------
CREATE TABLE Blessures (
  code_blessure VARCHAR(50) NOT NULL,
  type_blessure VARCHAR(50) NOT NULL,
  CONSTRAINT Blessures_PK PRIMARY KEY (code_blessure)
)ENGINE=InnoDB;


-- ----------------------------
-- Table: Unites
-- ----------------------------
CREATE TABLE Unites (
  code_unite VARCHAR(50) NOT NULL,
  nom_unite VARCHAR(50) NOT NULL,
  CONSTRAINT Unites_PK PRIMARY KEY (code_unite)
)ENGINE=InnoDB;


-- ----------------------------
-- Table: blesse
-- ----------------------------
CREATE TABLE blesse (
  code_soldat VARCHAR(50) NOT NULL,
  code_blessure VARCHAR(50) NOT NULL,
  code_bataille VARCHAR(50) NOT NULL,
  date_blessure DATE NOT NULL,
  CONSTRAINT blesse_PK PRIMARY KEY (code_soldat, code_blessure, code_bataille),
  CONSTRAINT blesse_code_soldat_FK FOREIGN KEY (code_soldat) REFERENCES Soldats (code_soldat),
  CONSTRAINT blesse_code_blessure_FK FOREIGN KEY (code_blessure) REFERENCES Blessures (code_blessure),
  CONSTRAINT blesse_code_bataille_FK FOREIGN KEY (code_bataille) REFERENCES Batailles (code_bataille)
)ENGINE=InnoDB;


-- ----------------------------
-- Table: promu
-- ----------------------------
CREATE TABLE promu (
  code_soldat VARCHAR(50) NOT NULL,
  code_grade VARCHAR(50) NOT NULL,
  date_promotion DATE NOT NULL,
  CONSTRAINT promu_PK PRIMARY KEY (code_soldat, code_grade),
  CONSTRAINT promu_code_soldat_FK FOREIGN KEY (code_soldat) REFERENCES Soldats (code_soldat),
  CONSTRAINT promu_code_grade_FK FOREIGN KEY (code_grade) REFERENCES Grades (code_grade)
)ENGINE=InnoDB;


-- ----------------------------
-- Table: affecte
-- ----------------------------
CREATE TABLE affecte (
  code_soldat VARCHAR(50) NOT NULL,
  code_unite VARCHAR(50) NOT NULL,
  date_affectation DATE NOT NULL,
  CONSTRAINT affecte_PK PRIMARY KEY (code_soldat, code_unite),
  CONSTRAINT affecte_code_soldat_FK FOREIGN KEY (code_soldat) REFERENCES Soldats (code_soldat)
)ENGINE=InnoDB;

/******************************************************************************************************
*                                                                                                     *
*      -->    Désolé, il faut activer cette version pour voir la suite du script !                    *
*                                                                                                     *
*******************************************************************************************************/
    
</body>
</html>